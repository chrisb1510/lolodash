// Generated by CoffeeScript 1.8.0
(function() {
  var worker, _;

  _ = require('lodash');

  worker = function(items) {
    var grouped, result, total;
    result = [];
    total = 0;
    grouped = _.groupBy(items, 'article');
    _.forEach(grouped, function(item, articleNum) {
      total = 0;
      if (_.size(item) === 1) {
        total = item[0].quantity;
      } else {
        total = _.reduce(item, function(sum, item) {
          return sum + item.quantity;
        }, 0);
      }
      return result.push({
        "article": +articleNum,
        "total_orders": total
      });
    });
    return _.sortBy(result, 'total_orders').reverse();
  };

  module.exports = worker;

}).call(this);
